{"version":3,"sources":["bundle.min.js","app.js","controllers.js","directives.js","services.js"],"names":["lukkariApp","angular","module","run","$ionicPlatform","ready","window","cordova","plugins","Keyboard","hideKeyboardAccessoryBar","disableScroll","StatusBar","styleDefault","constant","url","config","$stateProvider","$urlRouterProvider","state","abstract","templateUrl","controller","views","menuContent","otherwise","lukkariControllers","loadingTemplate","$scope","$ionicLoading","LocalStorage","$ionicModal","MyDate","Lessons","ionicMaterialInk","ionicMaterialMotion","getAppointments","show","template","getDay","day","currentDay","callback","response","hide","success","lessons","dayLessons","console","error","groupInfo","group","get","Date","fromTemplateUrl","scope","then","modal","closeGroupName","$on","e","blinds","setGroup","set","changeGroup","groupName","undefined","moveDay","direction","getDayFromDay","offsetDays","displayEffect","$stateParams","lesson","getLesson","id","getWeek","currentDate","allLessons","weekLessons","days","i","date","lessonsLength","length","j","startDay","toDateString","push","getMonday","endDate","moveWeek","$cordovaToast","$timeout","$cordovaCalendar","datePickerCallback","val","reminder","datepickerObject","inputDate","datePickerCallback2","endDay","datepickerObject2","toastOptions","duration","position","titleLabel","todayLabel","closeLabel","setLabel","setButtonType","todayButtonType","closeButtonType","mondayFirst","templateType","showTodayButton","modalHeaderColor","modalFooterColor","from","dateFormat","closeOnSelect","time","location","href","addToCalendar","createEvent","element","index","array","groups","createEventWithOptions","title","name","room","notes","teacher","code","startDate","firstReminderMinutes","calOptions","secondReminderMinutes","calendarName","calendarId","result","err","getDayToDay","forEach","msg","log","ripple","lukkariDirectives","directive","restrict","link","attr","$last","$emit","ngLastRepeat","lukkariServices","factory","localStorage","getItem","value","setItem","d","diff","getDate","setDate","getLocaleDate","_ref","years","options","month","year","Intl","DateTimeFormat","format","_ref2","getTime","DAY_IN_MILLISECONDS","setTime","getDayFromToday","now","$http","ApiEndpoint","parseLesson","resources","resource","type","roomInfo","parent","data","studentGroup","savedGroupName","apiKey","method","withCredentials","headers","authorization","accept-language","content-type","cache-control","status","reservations","_ref3","toUpperCase","_ref4","getMonth","_ref5","getFullYear","_ref6","correctEndDate","retLessons"],"mappings":"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","file":"bundle.min.js","sourcesContent":["'use strict';\n\nvar lukkariApp = angular.module('lukkari', ['ionic', 'lukkari.controllers', 'lukkari.services', 'lukkari.directives', 'ionic-datepicker', 'ionic-material']);\n\nlukkariApp.run(['$ionicPlatform', function ($ionicPlatform) {\n  $ionicPlatform.ready(function () {\n    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n    // for form inputs)\n    if (window.cordova && window.cordova.plugins.Keyboard) {\n      cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n      cordova.plugins.Keyboard.disableScroll(true);\n    }\n    if (window.StatusBar) {\n      // org.apache.cordova.statusbar required\n      StatusBar.styleDefault();\n    }\n  });\n}]);\n\n// http://blog.ionic.io/handling-cors-issues-in-ionic/\nlukkariApp.constant('ApiEndpoint', {\n  url: 'http://localhost:8100/api'\n});\n\n// menuContent-view is presented on the main view.\nlukkariApp.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\n  $stateProvider.state('app', {\n    url: '/app',\n    abstract: true,\n    templateUrl: 'templates/menu.html',\n    controller: 'LukkariCtrl'\n  }).state('app.search', {\n    url: '/search',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/search.html',\n        controller: 'SearchCtrl'\n      }\n    }\n  }).state('app.settings', {\n    url: '/settings',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/settings.html',\n        controller: 'SettingsCtrl'\n      }\n    }\n  }).state('app.todayLesson', {\n    url: '/today/:id',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/lesson.html',\n        controller: 'LessonCtrl'\n      }\n    }\n  }).state('app.today', {\n    url: '/today',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/today.html',\n        controller: 'TodayCtrl'\n      }\n    }\n  }).state('app.lesson', {\n    url: '/week/:id',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/lesson.html',\n        controller: 'LessonCtrl'\n      }\n    }\n  }).state('app.week', {\n    url: '/week',\n    views: {\n      'menuContent': {\n        templateUrl: 'templates/week.html',\n        controller: 'WeekCtrl'\n      }\n    }\n  });\n  // if none of the above states are matched, use this as the fallback\n  $urlRouterProvider.otherwise('/app/today');\n}]);\n'use strict';\n\nvar lukkariControllers = angular.module('lukkari.controllers', ['ngCordova']);\nvar loadingTemplate = '<div class=\"loader\"><svg class=\"circular\">' + '<circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\"' + ' stroke-miterlimit=\"10\"/></svg></div>';\n// insert needed sidemenu stuff here\nlukkariControllers.controller('LukkariCtrl', [function ($scope) {}]);\n\n// controller for today view\nlukkariControllers.controller('TodayCtrl', ['$scope', '$ionicLoading', 'LocalStorage', '$ionicModal', 'MyDate', 'Lessons', 'ionicMaterialInk', 'ionicMaterialMotion', function ($scope, $ionicLoading, LocalStorage, $ionicModal, MyDate, Lessons, ionicMaterialInk, ionicMaterialMotion) {\n  $scope.groupInfo = {};\n  $scope.groupInfo.group = LocalStorage.get('groupName');\n  $scope.currentDay = new Date();\n\n  // Show new group modal when no group is set\n  $ionicModal.fromTemplateUrl('templates/newgroup.html', {\n    scope: $scope\n  }).then(function (modal) {\n    $scope.modal = modal;\n    if (!$scope.groupInfo.group) {\n      // open modal to set group name\n      $scope.modal.show();\n    }\n  });\n\n  $scope.closeGroupName = function () {\n    $scope.modal.hide();\n  };\n\n  function getAppointments() {\n    $ionicLoading.show({\n      template: loadingTemplate\n    });\n\n    Lessons.getDay({\n      day: $scope.currentDay,\n      callback: function callback(response) {\n        $ionicLoading.hide();\n        // Set Motion\n        //ionicMaterialMotion.blinds();\n        if (!response.success) {\n          console.error('ERROR');\n        } else {\n          $scope.lessons = response.dayLessons;\n        }\n      }\n    });\n  }\n\n  $scope.$on('ngLastRepeat.myList', function (e) {\n    ionicMaterialMotion.blinds();\n  });\n\n  // sets the group\n  $scope.setGroup = function () {\n    LocalStorage.set('groupName', $scope.groupInfo.group);\n    $scope.modal.hide();\n\n    Lessons.changeGroup({\n      groupName: $scope.groupInfo.group,\n      callback: function callback(success) {\n        if (success) {\n          getAppointments();\n        } else {\n          console.error('failed to change group name');\n        }\n      }\n    });\n  };\n\n  $scope.lessons = [];\n  if ($scope.groupInfo.group !== undefined) {\n    Lessons.changeGroup({\n      groupName: $scope.groupInfo.group,\n      callback: function callback(success) {\n        if (success) {\n          getAppointments();\n        } else {\n          console.error('failed to change group name');\n        }\n      }\n    });\n  }\n\n  // Moves a day forwards/backwards\n  $scope.moveDay = function (direction) {\n    $scope.currentDay = MyDate.getDayFromDay({\n      currentDay: $scope.currentDay,\n      offsetDays: direction\n    });\n\n    getAppointments();\n  };\n\n  // Set Ink\n  ionicMaterialInk.displayEffect();\n}]);\n\n// controller for single appointment view\nlukkariControllers.controller('LessonCtrl', ['$scope', '$ionicLoading', '$stateParams', 'Lessons', 'ionicMaterialInk', 'ionicMaterialMotion', function ($scope, $ionicLoading, $stateParams, Lessons, ionicMaterialInk, ionicMaterialMotion) {\n  $scope.lesson = Lessons.getLesson($stateParams.id);\n}]);\n\n// controller for weekly view\nlukkariControllers.controller('WeekCtrl', ['$scope', '$ionicLoading', '$ionicModal', 'LocalStorage', 'MyDate', 'Lessons', 'ionicMaterialInk', 'ionicMaterialMotion', function ($scope, $ionicLoading, $ionicModal, LocalStorage, MyDate, Lessons, ionicMaterialInk, ionicMaterialMotion) {\n  $scope.groupInfo = {};\n  $scope.groupInfo.group = LocalStorage.get('groupName');\n  $scope.currentDate = MyDate.getMonday(new Date());\n  $scope.endDate = MyDate.getDayFromDay({\n    currentDay: $scope.currentDate,\n    offsetDays: 4\n  });\n\n  // Create modal for new group if no group name is set\n  if (!$scope.groupInfo.group) {\n    $ionicModal.fromTemplateUrl('templates/newgroup.html', {\n      scope: $scope\n    }).then(function (modal) {\n      $scope.modal = modal;\n      // open modal to set group name\n      $scope.modal.show();\n    });\n  }\n\n  // closes the group name dialog\n  $scope.closeGroupName = function () {\n    $scope.modal.hide();\n  };\n\n  // returns all of the appointments\n  function getAppointments() {\n    // show the loading window\n    $ionicLoading.show({\n      template: loadingTemplate\n    });\n    // get all the appointments\n    Lessons.getWeek({\n      day: $scope.currentDate,\n      callback: function callback(response) {\n        $ionicLoading.hide();\n        //ionicMaterialMotion.ripple();\n\n        if (!response.success) {\n          console.error('ERROR');\n        } else {\n          var allLessons = response.weekLessons;\n          $scope.days = [];\n          for (var i = 0; i < 5; i++) {\n            var day = {};\n            // get mon-fri\n            day.date = MyDate.getDayFromDay({\n              currentDay: $scope.currentDate,\n              offsetDays: i\n            });\n            day.lessons = [];\n            var lessonsLength = allLessons.length;\n            for (var j = 0; j < lessonsLength; j++) {\n              var lesson = allLessons[j];\n              // if same day push into the day array\n              if (lesson.startDay.toDateString() === day.date.toDateString()) {\n                day.lessons.push(lesson);\n              }\n            }\n            $scope.days.push(day);\n          }\n        }\n      }\n    });\n    // hide the loading after done\n    $ionicLoading.hide();\n  }\n\n  $scope.$on('ngLastRepeat.myList', function (e) {\n    ionicMaterialMotion.blinds();\n  });\n\n  // sets the group name\n  $scope.setGroup = function () {\n    LocalStorage.set('groupName', $scope.groupInfo.group);\n    $scope.modal.hide();\n\n    Lessons.changeGroup({\n      groupName: $scope.groupInfo.group,\n      callback: function callback(success) {\n        if (success) {\n          getAppointments();\n        } else {\n          console.error('failed to change group name');\n        }\n      }\n    });\n  };\n\n  $scope.lessons = [];\n  if ($scope.groupInfo.group !== undefined) {\n    Lessons.changeGroup({\n      groupName: $scope.groupInfo.group,\n      callback: function callback(success) {\n        if (success) {\n          getAppointments();\n        } else {\n          console.error('failed to change group name');\n        }\n      }\n    });\n  }\n\n  // moves a week forwards/backwards\n  $scope.moveWeek = function (direction) {\n    $scope.currentDate = MyDate.getDayFromDay({\n      currentDay: $scope.currentDate,\n      offsetDays: 7 * direction\n    });\n    $scope.endDate = MyDate.getDayFromDay({\n      currentDay: $scope.currentDate,\n      offsetDays: 4\n    });\n\n    getAppointments();\n  };\n\n  // Set Ink\n  ionicMaterialInk.displayEffect();\n}]);\n\nlukkariControllers.controller('SettingsCtrl', ['$scope', 'LocalStorage', '$cordovaToast', '$ionicPlatform', '$timeout', '$cordovaCalendar', 'Lessons', 'MyDate', 'ionicMaterialInk', 'ionicMaterialMotion', function ($scope, LocalStorage, $cordovaToast, $ionicPlatform, $timeout, $cordovaCalendar, Lessons, MyDate, ionicMaterialInk, ionicMaterialMotion) {\n  $scope.groupInfo = {};\n  $scope.reminder = {};\n  $scope.reminder.startDay = new Date();\n  $scope.reminder.endDay = new Date();\n\n  var toastOptions = {\n    duration: 'long',\n    position: 'center'\n  };\n\n  function datePickerCallback(val) {\n    if (typeof val === 'undefined') {\n      //console.log('No date selected');\n    } else {\n        //console.log('Selected date is : ', val);\n        $scope.reminder.startDay = val;\n        $scope.datepickerObject.inputDate = val;\n      }\n  }\n\n  function datePickerCallback2(val) {\n    if (typeof val === 'undefined') {\n      //console.log('No date selected');\n    } else {\n        //console.log('Selected date is : ', val);\n        $scope.reminder.endDay = val;\n        $scope.datepickerObject2.inputDate = val;\n      }\n  }\n\n  // https://github.com/rajeshwarpatlolla/ionic-datepicker\n  $scope.datepickerObject = {\n    titleLabel: 'Select Start Date', //Optional\n    todayLabel: 'Today', //Optional\n    closeLabel: '<span class=\"icon ion-android-close\"></span>', //Optional\n    setLabel: '<span class=\"icon ion-android-done\"></span>', //Optional\n    setButtonType: 'button-positive', //Optional\n    todayButtonType: 'button-stable', //Optional\n    closeButtonType: 'button-assertive', //Optional\n    inputDate: $scope.reminder.startDay, //Optional\n    mondayFirst: true, //Optional\n    //disabledDates: disabledDates, //Optional\n    //weekDaysList: weekDaysList, //Optional\n    //monthList: monthList, //Optional\n    templateType: 'popup', //Optional\n    showTodayButton: 'true', //Optional\n    modalHeaderColor: 'bar-stable', //Optional\n    modalFooterColor: 'bar-stable', //Optional\n    from: new Date(), //Optional\n    //to: new Date(2018, 8, 25), //Optional\n    callback: function callback(val) {\n      //Mandatory\n      datePickerCallback(val);\n    },\n    dateFormat: 'dd-MM-yyyy', //Optional\n    closeOnSelect: true };\n\n  //Optional\n  $scope.datepickerObject2 = {\n    titleLabel: 'Select End Date', //Optional\n    todayLabel: 'Today', //Optional\n    closeLabel: '<span class=\"icon ion-android-close\"></span>', //Optional\n    setLabel: '<span class=\"icon ion-android-done\"></span>', //Optional\n    setButtonType: 'button-positive', //Optional\n    todayButtonType: 'button-stable', //Optional\n    closeButtonType: 'button-assertive', //Optional\n    inputDate: $scope.reminder.endDay, //Optional\n    mondayFirst: true, //Optional\n    //disabledDates: disabledDates, //Optional\n    //weekDaysList: weekDaysList, //Optional\n    //monthList: monthList, //Optional\n    templateType: 'popup', //Optional\n    showTodayButton: false, //Optional\n    modalHeaderColor: 'bar-positive', //Optional\n    modalFooterColor: 'bar-positive', //Optional\n    from: new Date(), //Optional\n    //to: new Date(2018, 8, 25), //Optional\n    callback: function callback(val) {\n      //Mandatory\n      datePickerCallback2(val);\n    },\n    dateFormat: 'dd-MM-yyyy', //Optional\n    closeOnSelect: true };\n\n  //Optional\n  $scope.reminder.time = 'null';\n  $scope.groupInfo.group = LocalStorage.get('groupName');\n  if (!$scope.groupInfo.group) {\n    $scope.groupInfo.group = '';\n  }\n\n  $scope.changeGroup = function () {\n    LocalStorage.set('groupName', $scope.groupInfo.group);\n    // show toast that change was successful\n    $ionicPlatform.ready(function () {\n      try {\n        $cordovaToast.show('Group successfully changed!', toastOptions.duration, toastOptions.position);\n      } catch (e) {\n        // do nothing because it fails on browser\n      } finally {\n        // change to today view after 2 seconds\n        $timeout(function () {\n          window.location.href = '#/app/today';\n        }, 2000);\n      }\n    });\n  };\n\n  $scope.addToCalendar = function () {\n    var appointments = [];\n    var calOptions = {};\n    // works on iOS only\n    calOptions.calendarName = 'Lukkari app calendar';\n    // android has id but no fucking idea what it does (1 is default)\n    // so great documentation 5/5\n    // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin\n    calOptions.calendarId = 1;\n\n    // google may set some default reminders depending on settings\n    // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin/issues/201\n    if ($scope.reminder.time !== 'null') {\n      calOptions.firstReminderMinutes = $scope.reminder.time;\n    } else {\n      calOptions.firstReminderMinutes = null;\n    }\n    calOptions.secondReminderMinutes = null;\n\n    var success = true;\n\n    function createEvent(element, index, array) {\n      var groups = '';\n      for (var i = 0; i < element.groups.length; i++) {\n        groups += element.groups[i] + ', ';\n      }\n\n      $cordovaCalendar.createEventWithOptions({\n        title: element.name,\n        location: element.room,\n        notes: 'Teacher(s): ' + element.teacher + '\\nGroup(s): ' + groups + '\\nCourse: ' + element.code,\n        startDate: element.startDay,\n        endDate: element.endDay,\n        firstReminderMinutes: calOptions.firstReminderMinutes,\n        secondReminderMinutes: calOptions.secondReminderMinutes,\n        calendarName: calOptions.calendarName,\n        calendarId: calOptions.calendarId\n        //calOptions: calOptions\n      }).then(function (result) {}, function (err) {\n        success = false;\n      });\n    }\n\n    Lessons.getDayToDay({\n      startDate: $scope.reminder.startDay,\n      endDate: $scope.reminder.endDay,\n      callback: function callback(response) {\n        $ionicPlatform.ready(function () {\n          response.lessons.forEach(createEvent);\n        });\n      }\n    });\n    var msg = '';\n    if (success) {\n      msg = 'Calendar events successfully added!';\n    } else {\n      msg = 'Failed to add calendar events!';\n    }\n\n    $cordovaToast.show(msg, toastOptions.duration, toastOptions.position);\n    console.log(msg);\n  };\n\n  // Set Motion\n  ionicMaterialMotion.ripple();\n\n  // Set Ink\n  ionicMaterialInk.displayEffect();\n}]);\n\n// TODO\nlukkariControllers.controller('SearchCtrl', ['$scope', 'LocalStorage', function ($scope, LocalStorage) {}]);\n'use strict';\n\nvar lukkariDirectives = angular.module('lukkari.directives', []);\n\nlukkariDirectives.directive('timeRange', function () {\n  return {\n    template: '{{lesson.startDay.toLocaleTimeString' + '(\"fi-FI\", {hour:\"numeric\", minute:\"numeric\"})}}' + ' â€” ' + '{{lesson.endDay.toLocaleTimeString' + '(\"fi-FI\", {hour:\"numeric\", minute:\"numeric\"})}}'\n  };\n});\n\nlukkariDirectives.directive('date', function () {\n  return {\n    template: '{{day.date.toLocaleDateString(\"fi-FI\",' + ' {weekday: \"short\", day: \"numeric\", month:\"numeric\"})}}'\n  };\n});\n\nlukkariDirectives.directive('ngLastRepeat', function ($timeout) {\n  return {\n    restrict: 'A',\n    link: function link(scope, element, attr) {\n      if (scope.$last === true) {\n        $timeout(function () {\n          scope.$emit('ngLastRepeat' + (attr.ngLastRepeat ? '.' + attr.ngLastRepeat : ''));\n        });\n      }\n    }\n  };\n});\n'use strict';\n\nvar lukkariServices = angular.module('lukkari.services', []);\n\nlukkariServices.factory('LocalStorage', [function () {\n  function get(name) {\n    return window.localStorage.getItem(name);\n  }\n\n  function set(name, value) {\n    return window.localStorage.setItem(name, value);\n  }\n\n  return {\n    get: get,\n    set: set\n  };\n}]);\n\nlukkariServices.factory('MyDate', [function () {\n  var DAY_IN_MILLISECONDS = 86400000;\n\n  // returns the monday of the week date object of the given date\n  function getMonday(d) {\n    d = new Date(d);\n    var day = d.getDay();\n    var diff = d.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\n    return new Date(d.setDate(diff));\n  }\n\n  function getLocaleDate(_ref) {\n    var day = _ref.day;\n    var years = _ref.years;\n\n    var options = {\n      //weekday: 'long',\n      month: 'numeric',\n      day: 'numeric'\n    };\n    if (typeof years === 'boolean' && years) {\n      options.year = 'numeric';\n    }\n    return new Intl.DateTimeFormat('fi-FI', options).format(day);\n  }\n\n  function getDayFromDay(_ref2) {\n    var currentDay = _ref2.currentDay;\n    var offsetDays = _ref2.offsetDays;\n\n    var day = currentDay.getTime();\n    // add desired amount of days to the millisecs\n    day += offsetDays * DAY_IN_MILLISECONDS;\n    // create Date object and set it's time to the millisecs\n    var date = new Date();\n    date.setTime(day);\n    return date;\n  }\n\n  // returns a day that is offset from today\n  function getDayFromToday(offsetDays) {\n    // today in millisecs since the beginning of time (UNIX time)\n    var day = Date.now();\n    // add desired amount of days to the millisecs\n    day += offsetDays * DAY_IN_MILLISECONDS;\n    // create Date object and set it's time to the millisecs\n    return new Date(day);\n  }\n\n  return {\n    getMonday: getMonday,\n    getDayFromToday: getDayFromToday,\n    getLocaleDate: getLocaleDate,\n    getDayFromDay: getDayFromDay\n  };\n}]);\n\nlukkariServices.factory('Lessons', ['$http', 'ApiEndpoint', 'MyDate', function ($http, ApiEndpoint, MyDate) {\n  var lessons = [];\n  var savedGroupName = '';\n\n  function parseLesson(element, index, array) {\n    var lesson = {};\n    lesson.id = index;\n    lesson.startDay = new Date(element.startDate);\n    lesson.endDay = new Date(element.endDate);\n    lesson.groups = [];\n    // parse the resources array\n    var resources = element.resources;\n\n    resources.forEach(function (resource, index, array) {\n      switch (resource.type) {\n        case 'realization':\n          lesson.code = resource.code;\n          lesson.name = resource.name;\n          break;\n        case 'room':\n          lesson.room = resource.code;\n          lesson.roomInfo = resource.parent.name;\n          break;\n        case 'student_group':\n          lesson.groups.push(resource.code);\n          break;\n      }\n    });\n    lessons.push(lesson);\n  }\n\n  function get(callback) {\n    var data = {\n      studentGroup: [savedGroupName]\n    };\n    var apiKey = 'Wu47zzKEPa7agvin47f5';\n    var url = ApiEndpoint.url + '/reservation/search' + '?apiKey=' + apiKey;\n    $http({\n      method: 'POST',\n      url: url,\n      data: data,\n      withCredentials: true,\n      headers: {\n        'authorization': 'Basic V3U0N3p6S0VQYTdhZ3ZpbjQ3ZjU6',\n        'accept-language': 'fi',\n        'content-type': 'application/json',\n        'cache-control': 'no-cache'\n      }\n    }).success(function (data, status, headers, config) {\n      console.log('success');\n      lessons = [];\n      data.reservations.forEach(parseLesson);\n      callback({\n        success: false\n      });\n    }).error(function (data, status, headers, config) {\n      console.log('failure');\n      callback({\n        success: false\n      });\n    });\n  }\n\n  // private get method that just saves lessons\n  // change group name method that changes group anme and uses private get method\n  function changeGroup(_ref3) {\n    var groupName = _ref3.groupName;\n    var callback = _ref3.callback;\n\n    savedGroupName = groupName.toUpperCase();\n    get(function (result) {\n      callback(result);\n    });\n  }\n\n  // get day method that returns one day's lessons using date\n  function getDay(_ref4) {\n    var callback = _ref4.callback;\n    var day = _ref4.day;\n\n    if (!day || !day instanceof Date) {\n      console.error('Error in date!');\n      callback({\n        success: false\n      });\n    } else {\n      var dayLessons = [];\n      lessons.forEach(function (lesson, index, array) {\n        var date = lesson.startDay;\n        if (date.getDate() === day.getDate() && date.getMonth() === day.getMonth()) {\n          dayLessons.push(lesson);\n        }\n      });\n      callback({\n        success: true,\n        dayLessons: dayLessons\n      });\n    }\n  }\n\n  // get week method that returns one week's lessons using startDate and week offset\n  function getWeek(_ref5) {\n    var callback = _ref5.callback;\n    var day = _ref5.day;\n\n    var weekLessons = [];\n    var startDate = new Date(day.getFullYear(), day.getMonth(), day.getDate());\n    var endDate = MyDate.getDayFromDay({\n      currentDay: day,\n      offsetDays: 5\n    });\n    lessons.forEach(function (lesson, index, array) {\n      if (lesson.startDay >= startDate && lesson.startDay <= endDate) {\n        weekLessons.push(lesson);\n      }\n    });\n    callback({\n      success: true,\n      weekLessons: weekLessons\n    });\n  }\n\n  //get day to day method that returns all appointments from day a to day b\n  function getDayToDay(_ref6) {\n    var callback = _ref6.callback;\n    var startDate = _ref6.startDate;\n    var endDate = _ref6.endDate;\n\n    var correctEndDate = MyDate.getDayFromDay({\n      currentDay: endDate,\n      offsetDays: 1\n    });\n    var retLessons = [];\n    lessons.forEach(function (lesson, index, array) {\n      if (lesson.startDay >= startDate && lesson.startDay <= correctEndDate) {\n        retLessons.push(lesson);\n      }\n    });\n    callback({\n      success: true,\n      lessons: retLessons\n    });\n  }\n\n  function getLesson(id) {\n    return lessons[id];\n  }\n\n  return {\n    changeGroup: changeGroup,\n    getDay: getDay,\n    getWeek: getWeek,\n    getDayToDay: getDayToDay,\n    getLesson: getLesson\n  };\n}]);","var lukkariApp = angular.module('lukkari', ['ionic', 'lukkari.controllers',\r\n  'lukkari.services', 'lukkari.directives', 'ionic-datepicker', 'ionic-material'\r\n]);\r\n\r\nlukkariApp.run(['$ionicPlatform',\r\nfunction($ionicPlatform) {\r\n  $ionicPlatform.ready(function() {\r\n    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\r\n    // for form inputs)\r\n    if (window.cordova && window.cordova.plugins.Keyboard) {\r\n      cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\r\n      cordova.plugins.Keyboard.disableScroll(true);\r\n\r\n    }\r\n    if (window.StatusBar) {\r\n      // org.apache.cordova.statusbar required\r\n      StatusBar.styleDefault();\r\n    }\r\n  });\r\n}]);\r\n\r\n// http://blog.ionic.io/handling-cors-issues-in-ionic/\r\nlukkariApp.constant('ApiEndpoint', {\r\n  url: 'http://localhost:8100/api'\r\n});\r\n\r\n// menuContent-view is presented on the main view.\r\nlukkariApp.config(['$stateProvider', '$urlRouterProvider',\r\n function($stateProvider, $urlRouterProvider) {\r\n  $stateProvider\r\n    .state('app', {\r\n      url: '/app',\r\n      abstract: true,\r\n      templateUrl: 'templates/menu.html',\r\n      controller: 'LukkariCtrl'\r\n    })\r\n    .state('app.search', {\r\n      url: '/search',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/search.html',\r\n          controller: 'SearchCtrl'\r\n        }\r\n      }\r\n    })\r\n    .state('app.settings', {\r\n      url: '/settings',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/settings.html',\r\n          controller: 'SettingsCtrl'\r\n        }\r\n      }\r\n    })\r\n    .state('app.todayLesson', {\r\n      url: '/today/:id',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/lesson.html',\r\n          controller: 'LessonCtrl'\r\n        }\r\n      }\r\n    })\r\n    .state('app.today', {\r\n      url: '/today',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/today.html',\r\n          controller: 'TodayCtrl'\r\n        }\r\n      }\r\n    })\r\n    .state('app.lesson', {\r\n      url: '/week/:id',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/lesson.html',\r\n          controller: 'LessonCtrl'\r\n        }\r\n      }\r\n    })\r\n    .state('app.week', {\r\n      url: '/week',\r\n      views: {\r\n        'menuContent': {\r\n          templateUrl: 'templates/week.html',\r\n          controller: 'WeekCtrl'\r\n        }\r\n      }\r\n    });\r\n  // if none of the above states are matched, use this as the fallback\r\n  $urlRouterProvider.otherwise('/app/today');\r\n}]);\r\n","var lukkariControllers = angular.module('lukkari.controllers', ['ngCordova']);\r\nconst loadingTemplate = '<div class=\"loader\"><svg class=\"circular\">' +\r\n'<circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\"' +\r\n' stroke-miterlimit=\"10\"/></svg></div>';\r\n// insert needed sidemenu stuff here\r\nlukkariControllers.controller('LukkariCtrl', [\r\n  function($scope) {}\r\n]);\r\n\r\n// controller for today view\r\nlukkariControllers.controller('TodayCtrl', ['$scope', '$ionicLoading',\r\n  'LocalStorage', '$ionicModal', 'MyDate', 'Lessons', 'ionicMaterialInk',\r\n  'ionicMaterialMotion',\r\n  function($scope, $ionicLoading, LocalStorage, $ionicModal, MyDate,\r\n    Lessons, ionicMaterialInk, ionicMaterialMotion) {\r\n    $scope.groupInfo = {};\r\n    $scope.groupInfo.group = LocalStorage.get('groupName');\r\n    $scope.currentDay = new Date();\r\n\r\n    // Show new group modal when no group is set\r\n    $ionicModal.fromTemplateUrl('templates/newgroup.html', {\r\n      scope: $scope\r\n    }).then(function(modal) {\r\n      $scope.modal = modal;\r\n      if (!$scope.groupInfo.group) {\r\n        // open modal to set group name\r\n        $scope.modal.show();\r\n      }\r\n    });\r\n\r\n    $scope.closeGroupName = function() {\r\n      $scope.modal.hide();\r\n    };\r\n\r\n    function getAppointments() {\r\n      $ionicLoading.show({\r\n        template: loadingTemplate\r\n      });\r\n\r\n      Lessons.getDay({\r\n        day: $scope.currentDay,\r\n        callback: function(response) {\r\n          $ionicLoading.hide();\r\n          // Set Motion\r\n          //ionicMaterialMotion.blinds();\r\n          if (!response.success) {\r\n            console.error('ERROR');\r\n          } else {\r\n            $scope.lessons = response.dayLessons;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    $scope.$on('ngLastRepeat.myList', function(e) {\r\n      ionicMaterialMotion.blinds();\r\n    });\r\n\r\n    // sets the group\r\n    $scope.setGroup = function() {\r\n      LocalStorage.set('groupName', $scope.groupInfo.group);\r\n      $scope.modal.hide();\r\n\r\n      Lessons.changeGroup({\r\n        groupName: $scope.groupInfo.group,\r\n        callback: function(success) {\r\n          if (success) {\r\n            getAppointments();\r\n          } else {\r\n            console.error('failed to change group name');\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.lessons = [];\r\n    if ($scope.groupInfo.group !== undefined) {\r\n      Lessons.changeGroup({\r\n        groupName: $scope.groupInfo.group,\r\n        callback: function(success) {\r\n          if (success) {\r\n            getAppointments();\r\n          } else {\r\n            console.error('failed to change group name');\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Moves a day forwards/backwards\r\n    $scope.moveDay = function(direction) {\r\n      $scope.currentDay = MyDate.getDayFromDay({\r\n        currentDay: $scope.currentDay,\r\n        offsetDays: direction\r\n      });\r\n\r\n      getAppointments();\r\n    };\r\n\r\n    // Set Ink\r\n    ionicMaterialInk.displayEffect();\r\n  }\r\n]);\r\n\r\n// controller for single appointment view\r\nlukkariControllers.controller('LessonCtrl', ['$scope', '$ionicLoading',\r\n  '$stateParams', 'Lessons','ionicMaterialInk', 'ionicMaterialMotion',\r\n  function($scope, $ionicLoading, $stateParams, Lessons, ionicMaterialInk,\r\n   ionicMaterialMotion) {\r\n    $scope.lesson = Lessons.getLesson($stateParams.id);\r\n  }\r\n]);\r\n\r\n// controller for weekly view\r\nlukkariControllers.controller('WeekCtrl', ['$scope', '$ionicLoading',\r\n  '$ionicModal', 'LocalStorage', 'MyDate', 'Lessons','ionicMaterialInk',\r\n  'ionicMaterialMotion',\r\n  function($scope, $ionicLoading, $ionicModal, LocalStorage, MyDate,\r\n    Lessons, ionicMaterialInk, ionicMaterialMotion) {\r\n    $scope.groupInfo = {};\r\n    $scope.groupInfo.group = LocalStorage.get('groupName');\r\n    $scope.currentDate = MyDate.getMonday(new Date());\r\n    $scope.endDate = MyDate.getDayFromDay({\r\n      currentDay: $scope.currentDate,\r\n      offsetDays: 4\r\n    });\r\n\r\n    // Create modal for new group if no group name is set\r\n    if (!$scope.groupInfo.group) {\r\n      $ionicModal.fromTemplateUrl('templates/newgroup.html', {\r\n        scope: $scope\r\n      }).then(function(modal) {\r\n        $scope.modal = modal;\r\n        // open modal to set group name\r\n        $scope.modal.show();\r\n      });\r\n    }\r\n\r\n    // closes the group name dialog\r\n    $scope.closeGroupName = function() {\r\n      $scope.modal.hide();\r\n    };\r\n\r\n    // returns all of the appointments\r\n    function getAppointments() {\r\n      // show the loading window\r\n      $ionicLoading.show({\r\n        template: loadingTemplate\r\n      });\r\n      // get all the appointments\r\n      Lessons.getWeek({\r\n        day: $scope.currentDate,\r\n        callback: function(response) {\r\n          $ionicLoading.hide();\r\n          //ionicMaterialMotion.ripple();\r\n\r\n          if (!response.success) {\r\n            console.error('ERROR');\r\n          } else {\r\n            var allLessons = response.weekLessons;\r\n            $scope.days = [];\r\n            for (var i = 0; i < 5; i++) {\r\n              var day = {};\r\n              // get mon-fri\r\n              day.date = MyDate.getDayFromDay({\r\n                currentDay: $scope.currentDate,\r\n                offsetDays: i\r\n              });\r\n              day.lessons = [];\r\n              var lessonsLength = allLessons.length;\r\n              for (var j = 0; j < lessonsLength; j++) {\r\n                var lesson = allLessons[j];\r\n                // if same day push into the day array\r\n                if (lesson.startDay.toDateString() ===\r\n                  day.date.toDateString()) {\r\n                  day.lessons.push(lesson);\r\n                }\r\n              }\r\n              $scope.days.push(day);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      // hide the loading after done\r\n      $ionicLoading.hide();\r\n    }\r\n\r\n    $scope.$on('ngLastRepeat.myList', function(e) {\r\n      ionicMaterialMotion.blinds();\r\n    });\r\n\r\n    // sets the group name\r\n    $scope.setGroup = function() {\r\n      LocalStorage.set('groupName', $scope.groupInfo.group);\r\n      $scope.modal.hide();\r\n\r\n      Lessons.changeGroup({\r\n        groupName: $scope.groupInfo.group,\r\n        callback: function(success) {\r\n          if (success) {\r\n            getAppointments();\r\n          } else {\r\n            console.error('failed to change group name');\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.lessons = [];\r\n    if ($scope.groupInfo.group !== undefined) {\r\n      Lessons.changeGroup({\r\n        groupName: $scope.groupInfo.group,\r\n        callback: function(success) {\r\n          if (success) {\r\n            getAppointments();\r\n          } else {\r\n            console.error('failed to change group name');\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // moves a week forwards/backwards\r\n    $scope.moveWeek = function(direction) {\r\n      $scope.currentDate = MyDate.getDayFromDay({\r\n        currentDay: $scope.currentDate,\r\n        offsetDays: (7 * direction)\r\n      });\r\n      $scope.endDate = MyDate.getDayFromDay({\r\n        currentDay: $scope.currentDate,\r\n        offsetDays: 4\r\n      });\r\n\r\n      getAppointments();\r\n    };\r\n\r\n    // Set Ink\r\n    ionicMaterialInk.displayEffect();\r\n  }\r\n]);\r\n\r\nlukkariControllers.controller('SettingsCtrl', ['$scope', 'LocalStorage',\r\n  '$cordovaToast', '$ionicPlatform', '$timeout', '$cordovaCalendar',\r\n  'Lessons', 'MyDate', 'ionicMaterialInk', 'ionicMaterialMotion',\r\n  function($scope, LocalStorage, $cordovaToast, $ionicPlatform,\r\n    $timeout, $cordovaCalendar, Lessons, MyDate, ionicMaterialInk,\r\n     ionicMaterialMotion) {\r\n    $scope.groupInfo = {};\r\n    $scope.reminder = {};\r\n    $scope.reminder.startDay = new Date();\r\n    $scope.reminder.endDay = new Date();\r\n\r\n    var toastOptions = {\r\n      duration: 'long',\r\n      position: 'center'\r\n    };\r\n\r\n    function datePickerCallback(val) {\r\n      if (typeof(val) === 'undefined') {\r\n        //console.log('No date selected');\r\n      } else {\r\n        //console.log('Selected date is : ', val);\r\n        $scope.reminder.startDay = val;\r\n        $scope.datepickerObject.inputDate = val;\r\n      }\r\n    }\r\n\r\n    function datePickerCallback2(val) {\r\n      if (typeof(val) === 'undefined') {\r\n        //console.log('No date selected');\r\n      } else {\r\n        //console.log('Selected date is : ', val);\r\n        $scope.reminder.endDay = val;\r\n        $scope.datepickerObject2.inputDate = val;\r\n      }\r\n    }\r\n\r\n    // https://github.com/rajeshwarpatlolla/ionic-datepicker\r\n    $scope.datepickerObject = {\r\n      titleLabel: 'Select Start Date', //Optional\r\n      todayLabel: 'Today', //Optional\r\n      closeLabel: '<span class=\"icon ion-android-close\"></span>', //Optional\r\n      setLabel: '<span class=\"icon ion-android-done\"></span>', //Optional\r\n      setButtonType: 'button-positive', //Optional\r\n      todayButtonType: 'button-stable', //Optional\r\n      closeButtonType: 'button-assertive', //Optional\r\n      inputDate: $scope.reminder.startDay, //Optional\r\n      mondayFirst: true, //Optional\r\n      //disabledDates: disabledDates, //Optional\r\n      //weekDaysList: weekDaysList, //Optional\r\n      //monthList: monthList, //Optional\r\n      templateType: 'popup', //Optional\r\n      showTodayButton: 'true', //Optional\r\n      modalHeaderColor: 'bar-stable', //Optional\r\n      modalFooterColor: 'bar-stable', //Optional\r\n      from: new Date(), //Optional\r\n      //to: new Date(2018, 8, 25), //Optional\r\n      callback: function(val) { //Mandatory\r\n        datePickerCallback(val);\r\n      },\r\n      dateFormat: 'dd-MM-yyyy', //Optional\r\n      closeOnSelect: true, //Optional\r\n    };\r\n\r\n    $scope.datepickerObject2 = {\r\n      titleLabel: 'Select End Date', //Optional\r\n      todayLabel: 'Today', //Optional\r\n      closeLabel: '<span class=\"icon ion-android-close\"></span>', //Optional\r\n      setLabel: '<span class=\"icon ion-android-done\"></span>', //Optional\r\n      setButtonType: 'button-positive', //Optional\r\n      todayButtonType: 'button-stable', //Optional\r\n      closeButtonType: 'button-assertive', //Optional\r\n      inputDate: $scope.reminder.endDay, //Optional\r\n      mondayFirst: true, //Optional\r\n      //disabledDates: disabledDates, //Optional\r\n      //weekDaysList: weekDaysList, //Optional\r\n      //monthList: monthList, //Optional\r\n      templateType: 'popup', //Optional\r\n      showTodayButton: false, //Optional\r\n      modalHeaderColor: 'bar-positive', //Optional\r\n      modalFooterColor: 'bar-positive', //Optional\r\n      from: new Date(), //Optional\r\n      //to: new Date(2018, 8, 25), //Optional\r\n      callback: function(val) { //Mandatory\r\n        datePickerCallback2(val);\r\n      },\r\n      dateFormat: 'dd-MM-yyyy', //Optional\r\n      closeOnSelect: true, //Optional\r\n    };\r\n\r\n    $scope.reminder.time = 'null';\r\n    $scope.groupInfo.group = LocalStorage.get('groupName');\r\n    if (!$scope.groupInfo.group) {\r\n      $scope.groupInfo.group = '';\r\n    }\r\n\r\n    $scope.changeGroup = function() {\r\n      LocalStorage.set('groupName', $scope.groupInfo.group);\r\n      // show toast that change was successful\r\n      $ionicPlatform.ready(function() {\r\n        try {\r\n          $cordovaToast.show('Group successfully changed!',\r\n            toastOptions.duration,\r\n            toastOptions.position);\r\n        } catch (e) {\r\n          // do nothing because it fails on browser\r\n        } finally {\r\n          // change to today view after 2 seconds\r\n          $timeout(function() {\r\n            window.location.href = '#/app/today';\r\n          }, 2000);\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.addToCalendar = function() {\r\n      var appointments = [];\r\n      var calOptions = {};\r\n      // works on iOS only\r\n      calOptions.calendarName = 'Lukkari app calendar';\r\n      // android has id but no fucking idea what it does (1 is default)\r\n      // so great documentation 5/5\r\n      // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin\r\n      calOptions.calendarId = 1;\r\n\r\n      // google may set some default reminders depending on settings\r\n      // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin/issues/201\r\n      if ($scope.reminder.time !== 'null') {\r\n        calOptions.firstReminderMinutes = $scope.reminder.time;\r\n      } else {\r\n        calOptions.firstReminderMinutes = null;\r\n      }\r\n      calOptions.secondReminderMinutes = null;\r\n\r\n      var success = true;\r\n\r\n      function createEvent(element, index, array) {\r\n        var groups = '';\r\n        for (var i = 0; i < element.groups.length; i++) {\r\n          groups += element.groups[i] + ', ';\r\n        }\r\n\r\n        $cordovaCalendar.createEventWithOptions({\r\n          title: element.name,\r\n          location: element.room,\r\n          notes: 'Teacher(s): ' + element.teacher +\r\n            '\\nGroup(s): ' + groups +\r\n            '\\nCourse: ' + element.code,\r\n          startDate: element.startDay,\r\n          endDate: element.endDay,\r\n          firstReminderMinutes: calOptions.firstReminderMinutes,\r\n          secondReminderMinutes: calOptions.secondReminderMinutes,\r\n          calendarName: calOptions.calendarName,\r\n          calendarId: calOptions.calendarId\r\n            //calOptions: calOptions\r\n        }).then(function(result) {\r\n        }, function(err) {\r\n          success = false;\r\n        });\r\n      }\r\n\r\n      Lessons.getDayToDay({\r\n        startDate: $scope.reminder.startDay,\r\n        endDate: $scope.reminder.endDay,\r\n        callback: function(response) {\r\n          $ionicPlatform.ready(function() {\r\n            response.lessons.forEach(createEvent);\r\n          });\r\n        }\r\n      });\r\n      var msg = '';\r\n      if (success) {\r\n        msg = 'Calendar events successfully added!';\r\n      } else {\r\n        msg = 'Failed to add calendar events!';\r\n      }\r\n\r\n      $cordovaToast.show(msg,\r\n        toastOptions.duration,\r\n        toastOptions.position);\r\n      console.log(msg);\r\n    };\r\n\r\n    // Set Motion\r\n    ionicMaterialMotion.ripple();\r\n\r\n    // Set Ink\r\n    ionicMaterialInk.displayEffect();\r\n  }\r\n]);\r\n\r\n// TODO\r\nlukkariControllers.controller('SearchCtrl', ['$scope', 'LocalStorage',\r\n  function($scope, LocalStorage) {}\r\n]);\r\n","var lukkariDirectives = angular.module('lukkari.directives', []);\n\nlukkariDirectives.directive('timeRange', function() {\n  return {\n    template: '{{lesson.startDay.toLocaleTimeString' +\n      '(\"fi-FI\", {hour:\"numeric\", minute:\"numeric\"})}}' +\n      ' â€” ' +\n      '{{lesson.endDay.toLocaleTimeString' +\n      '(\"fi-FI\", {hour:\"numeric\", minute:\"numeric\"})}}'\n  };\n});\n\nlukkariDirectives.directive('date', function() {\n  return {\n    template: '{{day.date.toLocaleDateString(\"fi-FI\",' +\n      ' {weekday: \"short\", day: \"numeric\", month:\"numeric\"})}}'\n  };\n});\n\nlukkariDirectives.directive('ngLastRepeat', function($timeout) {\n  return {\n    restrict: 'A',\n    link: function(scope, element, attr) {\n      if (scope.$last === true) {\n        $timeout(function() {\n          scope.$emit('ngLastRepeat' + (attr.ngLastRepeat ? '.' +\n            attr.ngLastRepeat : ''));\n        });\n      }\n    }\n  };\n});\n","var lukkariServices = angular.module('lukkari.services', []);\r\n\r\nlukkariServices.factory('LocalStorage', [function() {\r\n  function get(name) {\r\n    return window.localStorage.getItem(name);\r\n  }\r\n\r\n  function set(name, value) {\r\n    return window.localStorage.setItem(name, value);\r\n  }\r\n\r\n  return {\r\n    get: get,\r\n    set: set\r\n  };\r\n}]);\r\n\r\nlukkariServices.factory('MyDate', [function() {\r\n  var DAY_IN_MILLISECONDS = 86400000;\r\n\r\n  // returns the monday of the week date object of the given date\r\n  function getMonday(d) {\r\n    d = new Date(d);\r\n    var day = d.getDay();\r\n    var diff = d.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n    return new Date(d.setDate(diff));\r\n  }\r\n\r\n  function getLocaleDate({\r\n    day, years\r\n  }) {\r\n    var options = {\r\n      //weekday: 'long',\r\n      month: 'numeric',\r\n      day: 'numeric'\r\n    };\r\n    if (typeof years === 'boolean' && years) {\r\n      options.year = 'numeric';\r\n    }\r\n    return new Intl.DateTimeFormat('fi-FI', options).format(day);\r\n  }\r\n\r\n  function getDayFromDay({\r\n    currentDay, offsetDays\r\n  }) {\r\n    var day = currentDay.getTime();\r\n    // add desired amount of days to the millisecs\r\n    day += offsetDays * DAY_IN_MILLISECONDS;\r\n    // create Date object and set it's time to the millisecs\r\n    var date = new Date();\r\n    date.setTime(day);\r\n    return date;\r\n  }\r\n\r\n  // returns a day that is offset from today\r\n  function getDayFromToday(offsetDays) {\r\n    // today in millisecs since the beginning of time (UNIX time)\r\n    var day = Date.now();\r\n    // add desired amount of days to the millisecs\r\n    day += offsetDays * DAY_IN_MILLISECONDS;\r\n    // create Date object and set it's time to the millisecs\r\n    return new Date(day);\r\n  }\r\n\r\n  return {\r\n    getMonday: getMonday,\r\n    getDayFromToday: getDayFromToday,\r\n    getLocaleDate: getLocaleDate,\r\n    getDayFromDay: getDayFromDay\r\n  };\r\n}]);\r\n\r\nlukkariServices.factory('Lessons', ['$http', 'ApiEndpoint','MyDate',\r\n  function($http, ApiEndpoint, MyDate) {\r\n    var lessons = [];\r\n    var savedGroupName = '';\r\n\r\n    function parseLesson(element, index, array) {\r\n      var lesson = {};\r\n      lesson.id = index;\r\n      lesson.startDay = new Date(element.startDate);\r\n      lesson.endDay = new Date(element.endDate);\r\n      lesson.groups = [];\r\n      // parse the resources array\r\n      var {\r\n        resources\r\n      } = element;\r\n      resources.forEach(function(resource, index, array) {\r\n        switch (resource.type) {\r\n          case 'realization':\r\n            lesson.code = resource.code;\r\n            lesson.name = resource.name;\r\n            break;\r\n          case 'room':\r\n            lesson.room = resource.code;\r\n            lesson.roomInfo = resource.parent.name;\r\n            break;\r\n          case 'student_group':\r\n            lesson.groups.push(resource.code);\r\n            break;\r\n        }\r\n      });\r\n      lessons.push(lesson);\r\n    }\r\n\r\n    function get(callback) {\r\n      var data = {\r\n        studentGroup: [savedGroupName]\r\n      };\r\n      var apiKey = 'Wu47zzKEPa7agvin47f5';\r\n      var url = ApiEndpoint.url + '/reservation/search' +\r\n        '?apiKey=' + apiKey;\r\n      $http({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        withCredentials: true,\r\n        headers: {\r\n          'authorization': 'Basic V3U0N3p6S0VQYTdhZ3ZpbjQ3ZjU6',\r\n          'accept-language': 'fi',\r\n          'content-type': 'application/json',\r\n          'cache-control': 'no-cache'\r\n        }\r\n      }).success(function(data, status, headers, config) {\r\n        console.log('success');\r\n        lessons = [];\r\n        data.reservations.forEach(parseLesson);\r\n        callback({\r\n          success: false\r\n        });\r\n      }).error(function(data, status, headers, config) {\r\n        console.log('failure');\r\n        callback({\r\n          success: false\r\n        });\r\n      });\r\n    }\r\n\r\n    // private get method that just saves lessons\r\n    // change group name method that changes group anme and uses private get method\r\n    function changeGroup({\r\n      groupName, callback\r\n    }) {\r\n      savedGroupName = groupName.toUpperCase();\r\n      get(function(result) {\r\n        callback(result);\r\n      });\r\n    }\r\n\r\n    // get day method that returns one day's lessons using date\r\n    function getDay({\r\n      callback, day\r\n    }) {\r\n      if (!day || !day instanceof Date) {\r\n        console.error('Error in date!');\r\n        callback({\r\n          success: false\r\n        });\r\n      } else {\r\n        var dayLessons = [];\r\n        lessons.forEach(function(lesson, index, array) {\r\n          var date = lesson.startDay;\r\n          if (date.getDate() === day.getDate() &&\r\n            date.getMonth() === day.getMonth()) {\r\n            dayLessons.push(lesson);\r\n          }\r\n        });\r\n        callback({\r\n          success: true,\r\n          dayLessons\r\n        });\r\n      }\r\n    }\r\n\r\n    // get week method that returns one week's lessons using startDate and week offset\r\n    function getWeek({\r\n      callback, day\r\n    }) {\r\n      var weekLessons = [];\r\n      var startDate = new Date(day.getFullYear(), day.getMonth(),\r\n      day.getDate());\r\n      var endDate = MyDate.getDayFromDay({\r\n        currentDay: day,\r\n        offsetDays: 5\r\n      });\r\n      lessons.forEach(function(lesson, index, array) {\r\n        if (lesson.startDay >= startDate && lesson.startDay <= endDate) {\r\n          weekLessons.push(lesson);\r\n        }\r\n      });\r\n      callback({\r\n        success: true,\r\n        weekLessons\r\n      });\r\n    }\r\n\r\n    //get day to day method that returns all appointments from day a to day b\r\n    function getDayToDay({\r\n      callback, startDate, endDate\r\n    }) {\r\n      var correctEndDate = MyDate.getDayFromDay({\r\n        currentDay: endDate,\r\n        offsetDays: 1\r\n      });\r\n      var retLessons = [];\r\n      lessons.forEach(function(lesson, index, array) {\r\n        if (lesson.startDay >= startDate && lesson.startDay <= correctEndDate) {\r\n          retLessons.push(lesson);\r\n        }\r\n      });\r\n      callback({\r\n        success: true,\r\n        lessons: retLessons\r\n      });\r\n    }\r\n\r\n    function getLesson(id) {\r\n      return lessons[id];\r\n    }\r\n\r\n    return {\r\n      changeGroup: changeGroup,\r\n      getDay: getDay,\r\n      getWeek: getWeek,\r\n      getDayToDay: getDayToDay,\r\n      getLesson: getLesson\r\n    };\r\n  }\r\n]);\r\n"],"sourceRoot":"/source/"}